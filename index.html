
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" id="jquery"></script>
<script src="https://ss0.4sqi.net/scripts/third_party/jquery.ba-bbq-eddd4adf74d0c1310a401475178c57df.js" type="text/javascript"></script>
<script src="https://ss1.4sqi.net/scripts/apisamples-35608dc9c26343e74f5d99fc20bae6c5.js" type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[

/**
 * Sample application that uses the foursquare API to show how many Starbucks
 * locations a user has been to.
 */
function HowMany(apiKey, authUrl, apiUrl) {
  this.foursquare = new Foursquare(apiKey, authUrl, apiUrl);
}

/**
 * Fetch users's history, and then render in callbkac.
 */
HowMany.prototype.run = function() {
  this.foursquare.venueHistory(bind(this.onHistory, this));
}

/**
 * Given response from venuehistory, build a map from venue ID to history item.
 * @private
 */
HowMany.prototype.onHistory = function(history) {
  var restaurants_html = [];
  var airports_html = [];
  var coffee_html = [];
  var resident_html = [];
  var multiplex_html = [];
  var mall_html =[];
  var restaurants_counts = 0;
  var airports_counts = 0;
  var coffee_counts = 0;
  var resident_counts = 0;
  var multiplex_counts = 0;
  var mall_counts = 0;
  for (var i = 0; i < history.length; i++) {
    var entry = history[i]['venue'];
    if (entry.menu == undefined && entry.categories.length != 0)
    {
      //deal with non food places here
      if (entry.categories[0].name == 'Airport')
      {
        airports_counts++;
        airports_html.push(entry.name + '<br/>');
      }
      else if (entry.categories[0].name == 'Mall')
      {
        mall_counts++;
        mall_html.push(entry.name, ', ', entry.location.address, ', ', entry.location.city, '<br/>');
      }
      else if (entry.categories[0].name == 'Multiplex')
      {
        multiplex_counts++;
        multiplex_html.push(entry.name, ', ', entry.location.address, ', ', entry.location.city, '<br/>');
      }
      else if (entry.categories[0].name.indexOf('Residential') > -1)
      {
        resident_counts++;
        resident_html.push(entry.name, ', ', entry.location.address, ', ', entry.location.city, '<br/>');
      }
      else 
      {
        //Ignore others for now
      }
    }
    else {
      //deal with food places here  
       if (entry.categories[0].name.indexOf('Starbucks') > -1) {
        coffee_counts++;
        coffee_html.push(entry.location.address, ', ', entry.location.city, '<br/>');
       }    
    }
    
  }
    $('#coffee_html').html(coffee_html.join(''));
    $('#coffee_counts').html(coffee_counts + '');

    $('#mall_html').html(mall_html.join(''));
    $('#mall_counts').html(mall_counts + '');

    $('#airports_html').html(airports_html.join(''));
    $('#airports_counts').html(airports_counts + '');

    $('#resident_html').html(resident_html.join(''));
    $('#resident_counts').html(resident_counts + '');

    $('#multiplex_html').html(multiplex_html.join(''));
    $('#multiplex_counts').html(multiplex_counts + '');
}
//]]>

$(function() {

  new HowMany('NDP5V3HX44XRYA51JQWLMV500PXCCB4ZJ23DZJPNYDYMP5TU', 'https://foursquare.com/', 'https://api.foursquare.com/').run();

})
</script>
<link href="https://ss1.4sqi.net/styles/third_party/apisamples-0392cfe95c9fd32087ab6d80fcb80175.css" type="text/css" rel="stylesheet" />

    
</head>
<body>
<h1>How many Starbucks have I been to?</h1>
<br /><br />
<div style="width: 600px; height: 600px; position: absolute;" id="coffee_counts">
</div>
<div style="margin-left: 200px" id="coffee_html">
</div>

<h1>How many Airports have I been to?</h1>
<br /><br />
<div style="width: 600px; height: 600px; position: absolute;" id="airports_counts">
</div>
<div style="margin-left: 200px" id="airports_html">
</div>

<h1>How many Multiplexes have I been to ?</h1>
<br /><br />
<div style="width: 600px; height: 600px; position: absolute;" id="multiplex_counts">
</div>
<div style="margin-left: 200px" id="multiplex_html">
</div>

<h1>How many Malls have I been to ?</h1>
<br /><br />
<div style="width: 600px; height: 600px; position: absolute;" id="mall_counts">
</div>
<div style="margin-left: 200px" id="mall_html">
</div>

<h1>How many resident buildings have I been to?</h1>
<br /><br />
<div style="width: 600px; height: 600px; position: absolute;" id="resident_counts">
</div>
<div style="margin-left: 200px" id="resident_html">
</div>
</body>
</html>  
  